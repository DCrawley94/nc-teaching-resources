# Promises 1

## Learning Objectives:

- Know how to access the data from a promise when it resolves
- Know how to access any error generated by a rejected promise
- Understand that we can access data given to a function and use that data once a promise has resolved.

## Refresher

Figjam with promises example in

Ask students:

- given a function that returns a _promise_ how would we access the resolved value?
- and how would we access an error if one were to occur?
- expand to discuss multiple chained promises

## Intro Problem

- Problem README

Define the problem that we want to solve, describe in depth and check students understand.

## Tests

Show tests and get students to focus on the

- returns a promise
- returns `{searchTerm: word, isInFile:true}` if word is in file
- returns `{searchTerm: word, isInFile:false}` if word not present in file
- returns `{searchTerm: word, isInFile:false}` if readFile errors out

Get students to help solve problem:

### 1

Should return a promise

Show in **fs** docs

```js
function isNameInFile(name, fileToSearch) {
	return fs.readFile('./data/simpson.txt', 'utf-8');
}
// no need to deal with resolved value yet
```

or

```js
function isNameInFile(name, fileToSearch) {
	return fs.readFile(fileToSearch, 'utf-8').then((data) => {
		// do stuff
	});
}
// no need to deal with resolved value yet
```

Talk about how we are returning the promise out and the importance of that return

### 2

Remind students that we're now back in synchronous land and it's just a kata

We have a string - how can we check in contains a given string?

**Highlight how we have access to the word - ✨🙏✨ THE COVE ✨🙏✨**

### 3

More of the same

### 4

Go back to Readme and remind students of what we want to do if file doesn't exist

## Possible Solution:

```js
function isNameInFile(name, fileToSearch) {
	return fs
		.readFile(fileToSearch, 'utf-8')
		.then((data) => {
			const response = {
				searchTerm: name,
				isInFile: data.includes(name)
			};

			return response;
		})
		.catch((err) => {
			const response = {
				searchTerm: name,
				isInFile: false
			};

			return response;
		});
}
```
